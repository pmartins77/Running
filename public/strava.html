<button onclick="refreshStravaActivities()">üîÑ Rafra√Æchir</button>
<p id="loadingIndicator" style="display: none;">‚è≥ Chargement en cours...</p>

<script>
    async function refreshStravaActivities() {
        const token = localStorage.getItem("jwt");
        if (!token) {
            alert("Vous devez √™tre connect√© !");
            window.location.href = "login.html";
            return;
        }

        // Afficher l'indicateur de chargement
        document.getElementById("loadingIndicator").style.display = "block";

        try {
            const response = await fetch("/api/strava/import", {
                method: "POST",
                headers: { "Authorization": `Bearer ${token}` }
            });

            if (!response.ok) throw new Error("Erreur lors de l'importation des activit√©s Strava");

            alert("Importation Strava r√©ussie !");
            window.location.reload();
        } catch (error) {
            console.error("‚ùå Erreur importation Strava :", error);
            alert("Erreur lors de l'importation des activit√©s Strava.");
        } finally {
            // Masquer l'indicateur de chargement
            document.getElementById("loadingIndicator").style.display = "none";
        }
    }
</script>
